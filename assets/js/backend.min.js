var Backend=function(){return{init:function(){jQuery(".nav-tab-wrapper a").on("click",Backend.settings.tabClick),jQuery(".nav-tab-wrapper a:first").click(),jQuery("#gam_db_backup_start_backup").on("click",Backend.settings.startBackup),jQuery("#gam_db_backup_schedules_options_save").on("click",Backend.settings.saveSchedulesOptions);var e=jQuery("input[name='gam_db_backup_schedules_options']:checked").val();(""==e||void 0==e||null==e)&&jQuery("#gam_db_backup_schedules_options_none").attr("checked","checked")},settings:{tabClick:function(e){e.preventDefault(),jQuery(".settings_panel").hide(),jQuery(".nav-tab-active").removeClass("nav-tab-active"),jQuery(jQuery(this).attr("href")).show(),jQuery(this).addClass("nav-tab-active"),jQuery("#gam_db_backup_download_file").hide(),jQuery('label[for="setting-gam_db_backup_download_file"]').hide(),jQuery("#success-message").remove();var a=jQuery("#setting-event_manager_submission_expire_options:last option:selected").val();return"days"==a?jQuery("#setting-event_manager_submission_duration").closest("tr").show():jQuery("#setting-event_manager_submission_duration").closest("tr").hide(),!1},startBackup:function(e){e.preventDefault(),jQuery.ajax({type:"GET",dataType:"json",url:gam_db_backup_admin_js.ajax_url,data:{action:"db_backup_now"},beforeSend:function(){jQuery("#gam_db_backup_start_backup").after('<span id="loading-message"> '+gam_db_backup_admin_js.loading_message+"</span>")},success:function(e){jQuery("#gam_db_backup_download_file").show(),jQuery('label[for="setting-gam_db_backup_download_file"]').show(),jQuery("#gam_db_backup_download_file").attr("href",e.FullDownloadPath)},error:function(){},complete:function(){jQuery("#loading-message").remove()}})},saveSchedulesOptions:function(e){e.preventDefault(),jQuery.ajax({type:"POST",dataType:"json",url:gam_db_backup_admin_js.ajax_url,data:{action:"save_selected_schedule_option",selected_schedule_option:jQuery("input[name='gam_db_backup_schedules_options']:checked").val()},beforeSend:function(){jQuery("#gam_db_backup_schedules_options_save").after('<span id="loading-message"> '+gam_db_backup_admin_js.loading_message+"</span>")},success:function(e){jQuery("#gam_db_backup_schedules_options_save").after('<br/><br/><span id="success-message">'+e.Message+"</span>")},error:function(){},complete:function(){jQuery("#loading-message").remove()}})}}}};Backend=Backend(),jQuery(document).ready(function(){Backend.init()});